# Master配置优化

- binlog_format                       =row
- gtid_mode                           =on  
- enforc\_gtid\_consistency            =on  
- binlog\_group\_commit\_sync\_delay      =100   
- binlog\_group_\commit\_sync\_no\_delay\_count = 10
	- slave\_parallel\_type			  =logical_clock
	- slave\_parallel\_workers		  =8
- binlog\_order\_commits				  =on 建议还是开启  

[replication主要参数解释](https://www.cnblogs.com/zping/p/9171528.html)


![](images/复制参数优化2.jpg)   
- InnoDB, Prepare
    SQL已经成功执行并生成了相应的redo和undo内存日志； 
- Binlog, Flush Stage
    所有已经注册线程都将写入binlog缓存； 
- Binlog, Sync Stage
    binlog缓存将sync到磁盘，sync_binlog=1时该队列中所有事务的binlog将永久写入磁盘；
- InnoDB, Commit stage
    leader根据顺序调用存储引擎提交事务；
    
binglog group commit是5.7引入，为了提高从库的应用速度，在主库上尽量提高并行；8.0设计是针对从库，即使主库在串行提交事务，只要不相互冲突，在slave上也可以并行回放：WriteSet
- binlog\_transaction\_dependency\_tracking=commit_order|writeset|writeset_session
- transaction_write_set_extraction (hash方法)
- binlog_transaction_dependency_history_size (hash大小)

[WriteSet](https://www.cnblogs.com/danhuangpai/p/10254935.html)







https://www.feilvbin.ren/20181606/